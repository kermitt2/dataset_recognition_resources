<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Archiving and Interchange DTD v1.2d1 20170631//EN" "JATS-archivearticle1.dtd">
<article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" article-type="article" dtd-version="1.2d1" specific-use="production" xml:lang="en">
<front>
<journal-meta>
<journal-id journal-id-type="publisher-id">BIORXIV</journal-id>
<journal-title-group>
<journal-title>bioRxiv</journal-title>
<abbrev-journal-title abbrev-type="publisher">bioRxiv</abbrev-journal-title>
</journal-title-group>
<publisher>
<publisher-name>Cold Spring Harbor Laboratory</publisher-name>
</publisher>
</journal-meta>
<article-meta>
<article-id pub-id-type="doi">10.1101/109199</article-id>
<article-version>1.1</article-version>
<article-categories>
<subj-group subj-group-type="author-type">
<subject>Regular Article</subject>
</subj-group>
<subj-group subj-group-type="heading">
<subject>New Results</subject>
</subj-group>
<subj-group subj-group-type="hwp-journal-coll">
<subject>Scientific Communication</subject>
</subj-group>
</article-categories>
<title-group>
<article-title>Maintaining the provenance of microscopy metadata using OMERO.forms software</article-title>
</title-group>
<contrib-group>
<contrib contrib-type="author">
<name><surname>Russell</surname> <given-names>Douglas P.W.</given-names></name>
</contrib>
<contrib contrib-type="author" corresp="yes">
<name><surname>Sorger</surname> <given-names>Peter K.</given-names></name>
<xref ref-type="corresp" rid="cor1">&#x002A;</xref>
</contrib>
<aff><institution>Laboratory of Systems Pharmacology Harvard Medical School</institution> Boston, Massachusetts 02115, <country>USA</country></aff>
</contrib-group>
<author-notes>
<corresp id="cor1"><label>&#x002A;</label>Corresponding author: Peter K. Sorger, 200 Longwood Avenue, Boston, MA 02115, <email>peter_sorger@hms.harvard.edu</email>, phone (617) 432-6902, fax (617) 432-6990</corresp>
</author-notes>
<pub-date pub-type="epub">
<year>2017</year>
</pub-date>
<elocation-id>109199</elocation-id>
<history>
<date date-type="received">
<day>16</day>
<month>2</month>
<year>2017</year>
</date>
<date date-type="accepted">
<day>16</day>
<month>2</month>
<year>2017</year>
</date>
</history>
<permissions>
<copyright-statement>&#x00A9; 2017, Posted by Cold Spring Harbor Laboratory</copyright-statement>
<copyright-year>2017</copyright-year>
<license license-type="creative-commons" xlink:href="http://creativecommons.org/licenses/by/4.0/"><license-p>This pre-print is available under a Creative Commons License (Attribution 4.0 International), CC BY 4.0, as described at <ext-link ext-link-type="uri" xlink:href="http://creativecommons.org/licenses/by/4.0/">http://creativecommons.org/licenses/by/4.0/</ext-link></license-p></license>
</permissions>
<self-uri xlink:href="109199.pdf" content-type="pdf" xlink:role="full-text"/>
<abstract>
<title>Abstract</title>
<p>The creation of datasets that are findable, accessible, interoperable and reproducible (the FAIR standard) requires that data provenance be maintained<sup><xref rid="c1" ref-type="bibr">1</xref></sup>. Provenance is particularly important for microscopy data, whose interpretation is dependent on the biological context (e.g. cell state) and detection reagent (e.g. antibody.) This paper describes a new software tool, OMERO.forms, that extends the OMERO microscopy data management system<sup><xref rid="c2" ref-type="bibr">2</xref></sup> to simplify and enhance metadata entry and provenance tracking.</p>
</abstract>
<kwd-group kwd-group-type="author">
<title>Keywords:</title>
<kwd>Microscopy</kwd>
<kwd>Informatics</kwd>
<kwd>metadata</kwd>
<kwd>reproducibility</kwd>
</kwd-group>
<counts>
<page-count count="12"/>
</counts>
</article-meta>
</front>
<body>
<p>Data provenance comprises a record of data origins, the context in which it was collected, and how both data and context evolved over time. It is particularly important to track the provenance of metadata in a collaborative system in which multiple individuals are involved in data collection, curation and analysis. Increasing adoption of management software for microscopy data and metadata presents an opportunity to develop new software for tracking data provenance. OMERO<sup><xref rid="c2" ref-type="bibr">2</xref></sup> is the preeminent software system for managing microscopy data and metadata. OMERO is comprised of a repository server, an Application Programming Interface (API) and two standard clients: the OMERO.insight client is desktop based and OMERO.web is browser-based. The repository stores and organises image data and metadata on a remote server. The API enables interaction with all features of the repository, including: importing data, adding/querying/searching metadata and retrieving specific images and image planes (in the case of multi-dimensional images). However, even with within the context of a formal informatics system such as OMERO, managing metadata from microscopy experiments is challenging.<sup><bold><xref rid="c3" ref-type="bibr">3</xref></bold></sup> Across an experiment, some metadata is relatively homogenous (e.g. instrument properties) but biological conditions or antibody identity often vary from one experiment to the next. This heterogeneous metadata must also be recorded, verified to be valid and ideally have its provenance tracked.</p>
<p>It is infeasible for OMERO to provide a pre-specified schema for every type of experimental metadata. Instead, OMERO has general purpose mechanisms for attaching metadata to an <italic>imaging collection object,</italic><sup><italic><xref rid="c4" ref-type="bibr">4</xref></italic></sup> a specific collection of data arising from an experiment, multi-experiment project or high content screen. One of the most useful metadata association mechanisms in OMERO is <italic>map annotation</italic>. <italic>Map annotations</italic> are key-value pairs: an identifier for the item of data (the key) and the actual value of the data (the value). Map annotations are flexible and can be used to store a wide range of metadata. OMERO APIs and clients can programmatically add and read annotations for a given object allowing annotations to be used to mark-up figures, convey key information to other investigators, and utilised by data analysis pipelines.</p>
<p>Although <italic>map annotations</italic> are potentially powerful, allowing unrestricted annotation of objects with them runs the very considerable risk of mistyped terms and omissions caused by human error. Information in <italic>map annotations</italic> is not checked for consistency against a schema, a formal model of metadata structure. For example, there is no mechanism for mandating the presence of a particular key, such as cell type, or ensuring that a value that is entered conforms to a particular type (number, text string etc.) or a constrained vocabulary (hence a proliferation in controlled metadata of nominally identical names such as SK-BR-3, SKBR3 etc.). OMERO.forms software addresses these issues directly.</p>
<p>OMERO.forms is an extension of OMERO.web that enhances metadata input and records data provenance. OMERO.forms exploits the fact that, while is it unrealistic for experimental metadata to be homogenised so that it fits a fixed schema across an entire research organization or field of science, it is usually the case that a specific set of experiments have similar metadata requirements. In OMERO.forms, experiment-specific information is entered through reusable, but customisable HTML forms that make sure that information entered conforms to the specified form design. A form provides users with a context for a particular class of metadata input and is used to render requirements on that metadata in an accessible way, such as presenting standardized vocabularies as a dropdown selection. Both information submitted by a user and the form design itself (including its formal schema) are stored within OMERO in an immutable metadata store to ensure the integrity of data provenance. There is no limit to the number of new or updated form submissions that can be made. Thus, OMERO.forms combines the advantages of flexible map annotations with the constraints of formalized data schemas.</p>
<p>New forms are created using a web-based client in OMERO.forms and are associated with one or more types (e.g. dataset or high content screen) of <italic>imaging collection object.</italic> As forms are being created, the design is rendered live in HTML and can be tested by entering and validating exemplar metadata. Forms designed and presented with OMERO.forms have the capability to restrict a field to a certain type of metadata (string, number, boolean, etc.) or a controlled vocabulary (e.g. Male/Female). These fields can be a single value or a list of values of the specified type or vocabulary. Fields can optionally be made mandatory. Forms can also be designed with help text to guide user input and provides feedback on input that does not validate against the form design. The feedback is visualized in the context of the field or fields in which the validation failed. Form designs are stored as JSON (JavaScript Object Notation) conforming to JSON Schema.<sup><xref rid="c5" ref-type="bibr">5</xref></sup> The JSON Schema conformance is what allows OMERO.forms to validate information entered into the form against the form&#x2019;s schema (i.e. the form design) and to render the JSON designed form into an HTML form for display. A form is used throughout the course of a particular study to manage metadata entry and maintain provenance; as many different form schemas as are needed can be created for the types of experiments being conducted. The web application has an interface to allow OMERO group owners to assign forms of interest to the specific groups for which they are relevant. This is useful in systems with many forms as it ensures that users are only presented with forms that are applicable to them.</p>
<p>A key feature of OMERO.forms is that it presents metadata in an intelligible form and also records the entire provenance of that metadata, including initial user input and any revisions. When viewing, or editing a form for which data has previously been entered, the most recent data is preloaded into the form for reference. Every form version ever submitted is retained by the system and information submitted through a form is associated with the specific version of the form that was used to enter it. This is important because metadata is often uninterpretable when divorced from the context in which it was collected. An interface for viewing the full provenance of a form is available (<xref rid="fig1" ref-type="fig">Fig. 1a</xref>): all previous metadata submissions for a specific form are presented as a list along with a time of creation timestamp, username of the editor and any change messages (descriptions of the changes made) submitted. Clicking on any of these entries renders the metadata in the context of the form in which it was originally entered. Moreover, when new information is submitted to a field in in OMERO.forms, the metadata is stored as a JSON encoded string to a metadata store that is not accessible (and thus not changeable) to regular OMERO users. The submission is stored in the context of the imaging collection object and form for which it was submitted. Previous metadata submissions are not overwritten and the chronology of these represents the history of that form metadata. In addition to the immutable store, metadata is encoded as map annotations (<xref rid="fig1" ref-type="fig">Fig. 1b</xref>) on the relevant imaging collection object. No special knowledge of OMERO.forms is required for other software to make use of this annotation since annotating an imaging collection object is a standard functionality of the core OMERO system itself. Thus, all metadata is searchable and easily visualised in existing OMERO clients and available for use in computational analyses through existing OMERO APIs.</p>
<fig id="fig1" position="float" orientation="portrait" fig-type="figure">
<label>Figure 1:</label>
<caption><p>OMERO.forms History view. {a} History, {b} Associated map annotation.</p>
<p><bold>Fig. 1a</bold> The history viewer in OMERO.forms. Shows the information from every submission ever made for the given form and imaging collection object rendered in the context of the form version for which it was submitted.</p>
<p><bold>Fig. 1b</bold> The default OMERO visualization of a map annotation showing key-value pairs. This is attached directly to the imaging collection object on form submission to allow OMERO and any OMERO compatible software to access it without explicit knowledge of OMERO.forms.</p>
</caption>
<graphic xlink:href="109199_fig1.tif"/>
</fig>
<p>OMERO.forms addresses key requirements for application of FAIR standards to image data while requiring little or no modification of existing clients and APIs. OMERO.forms is free, open source software, available on GitHub<sup><xref rid="c6" ref-type="bibr">6</xref></sup> that can be installed on any OMERO server v5.0 or greater. The client and interface are intuitive enough for non-expert users to create new forms, enter metadata and review provenance while also including management features for group owners.</p>
</body>
<back>
<ack>
<title>Acknowledgements.</title>
<p>This work was supported by the NIH LINCS and BD2K programs; grants U54 HL127365 and 3U54HL127624-03S2, and HMS Research Computing.</p>
</ack>
<ref-list>
<title>References</title>
<ref id="c1"><label>1.</label><mixed-citation publication-type="journal"><string-name><given-names>M. D.</given-names> <surname>Wilkinson</surname></string-name>, <string-name><given-names>M.</given-names> <surname>Dumontier</surname></string-name>, <string-name><given-names>I. J.</given-names> <surname>Aalbersberg</surname></string-name>, <string-name><given-names>G.</given-names> <surname>Appleton</surname></string-name>, <string-name><given-names>M.</given-names> <surname>Axton</surname></string-name>, <string-name><given-names>A.</given-names> <surname>Baak</surname></string-name>, <string-name><given-names>N.</given-names> <surname>Blomberg</surname></string-name>, <string-name><given-names>J. W.</given-names> <surname>Boiten</surname></string-name>, <string-name><given-names>L. B.</given-names> <surname>da Silva Santos</surname></string-name>, <string-name><given-names>P. E.</given-names> <surname>Bourne</surname></string-name>, <string-name><given-names>J.</given-names> <surname>Bouwman</surname></string-name>, <string-name><given-names>A. J.</given-names> <surname>Brookes</surname></string-name>, <string-name><given-names>T.</given-names> <surname>Clark</surname></string-name>, <string-name><given-names>M.</given-names> <surname>Crosas</surname></string-name>, <string-name><given-names>I. D</given-names> <surname>illo</surname></string-name>, <string-name><given-names>O.</given-names> <surname>Dumon</surname></string-name>, <string-name><given-names>S.</given-names> <surname>Edmunds</surname></string-name>, <string-name><given-names>C. T.</given-names> <surname>Evelo</surname></string-name>, <string-name><given-names>R.</given-names> <surname>Finkers</surname></string-name>, <string-name><given-names>A.</given-names> <surname>Gonzalez-Beltran</surname></string-name>, <string-name><given-names>A. J.</given-names> <surname>Gray</surname></string-name>, <string-name><given-names>P.</given-names> <surname>Groth</surname></string-name>, <string-name><given-names>C.</given-names> <surname>Goble</surname></string-name>, <string-name><given-names>J. S.</given-names> <surname>Grethe</surname></string-name>, <string-name><given-names>J.</given-names> <surname>Heringa</surname></string-name>, <string-name><given-names>P. A.</given-names> <surname>&#x2019;t Hoen</surname></string-name>, <string-name><given-names>R.</given-names> <surname>Hooft</surname></string-name>, <string-name><given-names>T.</given-names> <surname>Kuhn</surname></string-name>, <string-name><given-names>R.</given-names> <surname>Kok</surname></string-name>, <string-name><given-names>J.</given-names> <surname>Kok</surname></string-name>, <string-name><given-names>S. J.</given-names> <surname>Lusher</surname></string-name>, <string-name><given-names>M. E.</given-names> <surname>Martone</surname></string-name>, <string-name><given-names>A.</given-names> <surname>Mons</surname></string-name>, <string-name><given-names>A. L.</given-names> <surname>Packer</surname></string-name>, <string-name><given-names>B.</given-names> <surname>Persson</surname></string-name>, <string-name><given-names>P.</given-names> <surname>Rocca-Serra</surname></string-name>, <string-name><given-names>M.</given-names> <surname>Roos</surname></string-name>, <string-name><given-names>R.</given-names> <surname>van Schaik</surname></string-name>, <string-name><given-names>S. A.</given-names> <surname>Sansone</surname></string-name>, <string-name><given-names>E.</given-names> <surname>Schultes</surname></string-name>, <string-name><given-names>T.</given-names> <surname>Sengstag</surname></string-name>, <string-name><given-names>T.</given-names> <surname>Slater</surname></string-name>, <string-name><given-names>G.</given-names> <surname>Strawn</surname></string-name>, <string-name><given-names>M. A.</given-names> <surname>Swertz</surname></string-name>, <string-name><given-names>M.</given-names> <surname>Thompson</surname></string-name>, <string-name><given-names>J.</given-names> <surname>van der Lei</surname></string-name>, <string-name><given-names>E.</given-names> <surname>van Mulligen</surname></string-name>, <string-name><given-names>J.</given-names> <surname>Velterop</surname></string-name>, <string-name><given-names>A.</given-names> <surname>Waag-meester</surname></string-name>, <string-name><given-names>P.</given-names> <surname>Wittenburg</surname></string-name>, <string-name><given-names>K.</given-names> <surname>Wolstencroft</surname></string-name>, <string-name><given-names>J.</given-names> <surname>Zhao</surname></string-name>, and <string-name><given-names>B.</given-names> <surname>Mons</surname></string-name>. <article-title>The FAIR Guiding Principles for scientific data management and stewardship</article-title>. <source>Sci Data</source>, <volume>3</volume>:<fpage>160018</fpage>, <month>Mar</month> <year>2016</year>.</mixed-citation></ref>
<ref id="c2"><label>2.</label><mixed-citation publication-type="journal"><string-name><given-names>C.</given-names> <surname>Allan</surname></string-name>, <string-name><given-names>J. M.</given-names> <surname>Burel</surname></string-name>, <string-name><given-names>J.</given-names> <surname>Moore</surname></string-name>, <string-name><given-names>C.</given-names> <surname>Blackburn</surname></string-name>, <string-name><given-names>M.</given-names> <surname>Linkert</surname></string-name>, <string-name><given-names>S.</given-names> <surname>Loynton</surname></string-name>, <string-name><given-names>D.</given-names> <surname>Macdonald</surname></string-name>, <string-name><given-names>W. J.</given-names> <surname>Moore</surname></string-name>, <string-name><given-names>C.</given-names> <surname>Neves</surname></string-name>, <string-name><given-names>A.</given-names> <surname>Patterson</surname></string-name>, <string-name><given-names>M.</given-names> <surname>Porter</surname></string-name>, <string-name><given-names>A.</given-names> <surname>Tarkowska</surname></string-name>, <string-name><given-names>B.</given-names> <surname>Loranger</surname></string-name>, <string-name><given-names>J.</given-names> <surname>Avondo</surname></string-name>, <string-name><given-names>I.</given-names> <surname>Lagerstedt</surname></string-name>, <string-name><given-names>L.</given-names> <surname>Lianas</surname></string-name>, <string-name><given-names>S.</given-names> <surname>Leo</surname></string-name>, <string-name><given-names>K.</given-names> <surname>Hands</surname></string-name>, <string-name><given-names>R. T.</given-names> <surname>Hay</surname></string-name>, <string-name><given-names>A.</given-names> <surname>Patwardhan</surname></string-name>, <string-name><given-names>C.</given-names> <surname>Best</surname></string-name>, <string-name><given-names>G. J.</given-names> <surname>Kleywegt</surname></string-name>, <string-name><given-names>G.</given-names> <surname>Zanetti</surname></string-name>, and <string-name><given-names>J. R.</given-names> <surname>Swedlow</surname></string-name>. <article-title>OMERO: flexible, model-driven data management for experimental biology</article-title>. <source>Nat. Methods</source>, <volume>9</volume>(<issue>3</issue>):<fpage>245</fpage>&#x2013;<lpage>253</lpage>, <month>Feb</month> <year>2012</year>.</mixed-citation></ref>
<ref id="c3"><label>3.</label><mixed-citation publication-type="journal"><string-name><given-names>J. R.</given-names> <surname>Swedlow</surname></string-name>, <string-name><given-names>I. G.</given-names> <surname>Goldberg</surname></string-name>, and <string-name><given-names>K. W.</given-names> <surname>Eliceiri</surname></string-name>. <article-title>Bioimage informatics for experimental biology</article-title>. <source>Annu Rev Biophys</source>, <volume>38</volume>:<fpage>327</fpage>&#x2013;<lpage>346</lpage>, <year>2009</year>.</mixed-citation></ref>
<ref id="c4"><label>4.</label><mixed-citation publication-type="journal"><string-name><given-names>S.</given-names> <surname>Li</surname></string-name>, <string-name><given-names>S.</given-names> <surname>Besson</surname></string-name>, <string-name><given-names>C.</given-names> <surname>Blackburn</surname></string-name>, <string-name><given-names>M.</given-names> <surname>Carroll</surname></string-name>, <string-name><given-names>R. K.</given-names> <surname>Ferguson</surname></string-name>, <string-name><given-names>H.</given-names> <surname>Flynn</surname></string-name>, <string-name><given-names>K.</given-names> <surname>Gillen</surname></string-name>, <string-name><given-names>R.</given-names> <surname>Leigh</surname></string-name>, <string-name><given-names>D.</given-names> <surname>Lindner</surname></string-name>, <string-name><given-names>M.</given-names> <surname>Linkert</surname></string-name>, <string-name><given-names>W. J.</given-names> <surname>Moore</surname></string-name>, <string-name><given-names>B.</given-names> <surname>Ramalingam</surname></string-name>, <string-name><given-names>E.</given-names> <surname>Rozbicki</surname></string-name>, <string-name><given-names>G.</given-names> <surname>Rustici</surname></string-name>, <string-name><given-names>A.</given-names> <surname>Tarkowska</surname></string-name>, <string-name><given-names>P.</given-names> <surname>Walczysko</surname></string-name>, <string-name><given-names>E.</given-names> <surname>Williams</surname></string-name>, <string-name><given-names>C.</given-names> <surname>Allan</surname></string-name>, <string-name><given-names>J. M.</given-names> <surname>Burel</surname></string-name>, <string-name><given-names>J.</given-names> <surname>Moore</surname></string-name>, and <string-name><given-names>J. R.</given-names> <surname>Swedlow</surname></string-name>. <article-title>Metadata management for high content screening in OMERO</article-title>. <source>Methods</source>, <volume>96</volume>:<fpage>27</fpage>&#x2013;<lpage>32</lpage>, <month>Mar</month> <year>2016</year>.</mixed-citation></ref>
<ref id="c5"><label>5.</label><mixed-citation publication-type="other"><string-name><given-names>Austin</given-names> <surname>Wright</surname></string-name> and <string-name><given-names>Geraint</given-names>, <surname>Luff</surname></string-name>. <article-title>JSON Schema Validation: A Vocabulary for Structural Validation of JSON</article-title>. <source>Internet-Draft draft-wright-json-schema-validation-00, Internet Engineering Task Force, October 2016. Work in Progress</source>.</mixed-citation></ref>
<ref id="c6"><label>6.</label><mixed-citation publication-type="website"><string-name><given-names>D.P.W</given-names> <surname>Russell</surname></string-name>. <source>OMERO.forms</source>. <ext-link ext-link-type="uri" xlink:href="https://github.com/sorgerlab/OMERO.forms">https://github.com/sorgerlab/OMERO.forms</ext-link>, <year>2016</year>.</mixed-citation></ref>
</ref-list>
<sec sec-type="COI-statement">
<title>Competing financial interests</title>
<p>PKS is a founder and shareholder of Glencoe Software Inc. (<ext-link ext-link-type="uri" xlink:href="https://glencoesoftware.com/">https://glencoesoftware.com/</ext-link>) a private US-based company that develops and resells open-source and proprietary applications based on the Open Microscopy Environment/OMERO standard.</p>
</sec>
<sec>
<title>Methods</title>
<p>Immutable metadata store. OMERO has no built-in immutable data store that a user can make use of. OMERO.forms makes use of privilege escalation in OMERO.web to record form metadata and context as an OMERO map annotation attached to a special user created for OMERO.forms. The annotations attached to this &#x201C;formmaster&#x201D; user are not readable or writeable by regular users. To access a forms history, privilege escalation is again used. At the point of privilege escalation, authorization checks are performed to ensure that a user has the right to access the requested form data.</p>
<p>JSON Schema. An IETF (Internet Engineering Task Force) draft specification<sup><xref rid="c5" ref-type="bibr">5</xref></sup> for validating schemas written in JSON. An implementation of this specification underpins OMERO.forms. This implementation is used to render an HTML form from the JSON design of a form. It is also used to validate values entered into the rendered form as conforming to assertions set forth in the design.</p>
<p>OMERO.forms Designer. This part of the web application is used to design forms. <xref rid="figS1" ref-type="fig">Supplementary Fig. 1</xref> shows the form editor interface. The section in <xref rid="figS1" ref-type="fig">supplementary Fig. 1a</xref> is used to give a form a unique name and configure which OMERO object types it is applicable to. Previously created forms can be loaded in this section and if the editing user has the permission to do so, the loaded form can be edited and saved. If the user does not have permission to (or does not want to) update an existing form, they can always save it (with or without modifications) with a new name. This section is also used to enter the change message when creating or updating a form which can be useful in retrospect to understand why changes were made. <xref rid="figS1" ref-type="fig">Supplementary Fig. 1b</xref>, <xref rid="figS1" ref-type="fig">supplementary Fig. 1c</xref> and <xref rid="figS1" ref-type="fig">supplementary Fig. 1c</xref> are html <italic>textarea</italic> input boxes enhanced with some basic syntax highlighting, automated indenting and line numbers. <xref rid="figS1" ref-type="fig">Supplementary Fig. 1b</xref> and <xref rid="figS1" ref-type="fig">supplementary Fig. 1c</xref> are used to do the actual form design. <xref rid="figS1" ref-type="fig">Supplementary Fig. 1b</xref> designs the schema of the form including the names, order, defaults and restrictions of the elements and their types. A simple named string field &#x201C;vehicle&#x201D; is shown. <xref rid="figS1" ref-type="fig">Supplementary Fig. 1c</xref> customises the visual representation of the form. In this example the &#x201C;description&#x201D; field (simply a string) would default to a text input (a single line of text), but has been customised to show a textarea (multiple lines of text) by changing the &#x201C;widget&#x201D; used to display it. A large number of widgets are built-in and this is extensible to allow the addition of custom higher-order widgets as the need arises. <xref rid="figS1" ref-type="fig">Supplementary Fig. 1d</xref> allows the manual input of test data and also shows a live rendering of data entered into the currently displayed form preview. <xref rid="figS1" ref-type="fig">Supplementary Fig. 1e</xref> is a live and functional rendering of the form and will update as changes are made to the form&#x2019;s design. This is exactly how the form will appear to the user at the point of use including the display of errors for invalid/omitted fields.</p>
<fig id="figS1" position="float" orientation="portrait" fig-type="figure">
<label>Supplementary Figure 1:</label>
<caption><p>OMERO.forms Designer. {a} Form configuration, {b} Form design, {c} Form UI (User Interface) design, {d} Form data, {e} Form preview</p>
<p><bold>Supplementary Fig. 1a</bold> OMERO.forms designer configuration of a form detailing the imaging collection object types it is applicable to, a name and an opportunity to enter a message describing what changes have been made to the form in the current update.</p>
<p><bold>Supplementary Fig. 1b</bold> The JSON representation of the form schema. The form design is changed by modifying this.</p>
<p><bold>Supplementary Fig. 1c</bold> The JSON representation of the form UI schema. Customization of how the HTML form is rendered from the JSON form schema is configured here.</p>
<p><bold>Supplementary Fig. 1d</bold> The data structure representing the information entered into the rendered form. This can also be used to enter test data directly to see how it is rendered in the context of the current rendered form.</p>
<p><bold>Supplementary Fig. 1e</bold> The live rendering of the form schema as an HTML form.</p>
</caption>
<graphic xlink:href="109199_figS1.tif"/>
</fig>
<p>Usage of OMERO.forms for end-users. Making use of OMERO.forms as an end-user is very simple as demonstrated in <xref rid="figS2" ref-type="fig">supplementary Fig. 2</xref>. When selecting an imaging collection object in OMERO.web (<xref rid="figS2" ref-type="fig">Supplementary Fig. 2a</xref>), choose the &#x201C;forms&#x201D; centre panel option from the dropdown box (<xref rid="figS2" ref-type="fig">Supplementary Fig. 2b</xref>). This will display the OMERO.forms interface with a list of all forms available to the current user. Upon selecting a form (<xref rid="figS2" ref-type="fig">Supplementary Fig. 2c</xref>), the form is rendered in the centre panel. If this form has been previously submitted for the given object, the most recent values will be loaded into the fields, otherwise they will be blank (or defaults if configured). The user can then populate the form and once the whole form is valid, submit it. The submitted form values are saved to the immutable data store and converted into a map annotation which is attached to the object and displayed by OMERO.web by default (<xref rid="figS2" ref-type="fig">Supplementary Fig. 2d</xref>).</p>
</sec>
<sec sec-type="supplementary-material">
<fig id="figS2" position="float" orientation="portrait" fig-type="figure">
<label>Supplementary Figure 2:</label>
<caption><p>OMERO.forms Editor. {a} Object selection, {b} Plugin selection, {c} Form selection, {d} Associated map annotation</p>
<p><bold>Supplementary Fig. 2a</bold> The imaging collection object currently selected. In this case, a plate from a high content screen.</p>
<p><bold>Supplementary Fig. 2b</bold> The centre panel plugin currently selected. In this case, &#x201C;Forms&#x201D; to represent OMERO.forms.</p>
<p><bold>Supplementary Fig 2c</bold> The currently selection form. In this case a basic &#x201C;Drug Response Experiment&#x201D;.</p>
<p><bold>Supplementary Fig 2d</bold> The default OMERO visualization of a map annotation showing the data from the current form.</p>
</caption>
<graphic xlink:href="109199_figS2.tif"/>
</fig>
</sec>
</back>
</article>