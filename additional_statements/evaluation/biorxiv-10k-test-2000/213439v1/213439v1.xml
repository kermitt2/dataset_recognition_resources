<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Archiving and Interchange DTD v1.2d1 20170631//EN" "JATS-archivearticle1.dtd">
<article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" article-type="article" dtd-version="1.2d1" specific-use="production" xml:lang="en">
<front>
<journal-meta>
<journal-id journal-id-type="publisher-id">BIORXIV</journal-id>
<journal-title-group>
<journal-title>bioRxiv</journal-title>
<abbrev-journal-title abbrev-type="publisher">bioRxiv</abbrev-journal-title>
</journal-title-group>
<publisher>
<publisher-name>Cold Spring Harbor Laboratory</publisher-name>
</publisher>
</journal-meta>
<article-meta>
<article-id pub-id-type="doi">10.1101/213439</article-id>
<article-version>1.1</article-version>
<article-categories>
<subj-group subj-group-type="author-type">
<subject>Regular Article</subject>
</subj-group>
<subj-group subj-group-type="heading">
<subject>New Results</subject>
</subj-group>
<subj-group subj-group-type="hwp-journal-coll">
<subject>Scientific Communication</subject>
</subj-group>
</article-categories>
<title-group>
<article-title>Using experimental data as a voucher for study pre-registration</article-title>
</title-group>
<contrib-group>
<contrib contrib-type="author" corresp="yes">
<name><surname>Mazor</surname><given-names>Matan</given-names></name>
<xref ref-type="aff" rid="a1">1</xref>
<xref ref-type="aff" rid="a2">2</xref>
</contrib>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">http://orcid.org/0000-0002-3601-0644</contrib-id>
<name><surname>Mazor</surname><given-names>Noam</given-names></name>
<xref ref-type="aff" rid="a3">3</xref>
</contrib>
<contrib contrib-type="author">
<name><surname>Mukamel</surname><given-names>Roy</given-names></name>
<xref ref-type="aff" rid="a1">1</xref>
<xref ref-type="aff" rid="a2">2</xref>
</contrib>
<aff id="a1"><label>1</label><institution>School of Psychological Sciences, Tel Aviv University</institution></aff>
<aff id="a2"><label>2</label><institution>Sagol School of Neuroscience, Tel Aviv University</institution></aff>
<aff id="a3"><label>3</label><institution>Blavatnik School of Computer Science, Tel Aviv University</institution></aff>
</contrib-group>
<author-notes>
<corresp>Correspondence and requests for materials should be addressed to M.M (email: <email>matanmazor@outlook.com</email>).</corresp>
</author-notes>
<pub-date pub-type="epub">
<year>2017</year>
</pub-date>
<elocation-id>213439</elocation-id>
<history>
<date date-type="received">
<day>02</day>
<month>11</month>
<year>2017</year>
</date>
<date date-type="rev-recd">
<day>02</day>
<month>11</month>
<year>2017</year>
</date>
<date date-type="accepted">
<day>04</day>
<month>11</month>
<year>2017</year>
</date>
</history><permissions><copyright-statement>&#x00A9; 2017, Posted by Cold Spring Harbor Laboratory</copyright-statement>
<copyright-year>2017</copyright-year><license license-type="creative-commons" xlink:href="http://creativecommons.org/licenses/by/4.0/"><license-p>This pre-print is available under a Creative Commons License (Attribution 4.0 International), CC BY 4.0, as described at <ext-link ext-link-type="uri" xlink:href="http://creativecommons.org/licenses/by/4.0/">http://creativecommons.org/licenses/by/4.0/</ext-link></license-p></license></permissions>
<self-uri xlink:href="213439.pdf" content-type="pdf" xlink:role="full-text"/>
<abstract>
<p>Undisclosed exploitation of flexibility in data acquisition and analysis blurs the important distinction between exploratory and hypothesis-driven findings and inflates false-positive rates<sup><xref ref-type="bibr" rid="c1">1</xref>&#x2013;<xref ref-type="bibr" rid="c4">4</xref></sup>. Indeed, recent replication attempts have revealed low levels of replicability, pointing to high rates of false-positives in the literature<sup><xref ref-type="bibr" rid="c5">5</xref>&#x2013;<xref ref-type="bibr" rid="c10">10</xref></sup>. A contemporary solution to this problem is pre-registration: commitment to aspects of methods and analysis before data acquisition<sup><xref ref-type="bibr" rid="c11">11</xref></sup>. This solution is valid only to the extent that the commitment stage is time-locked to precede data collection. To date, time-locking can only be guaranteed by introducing a third party such as peer reviewers at an early stage, making this solution less appealing for many<sup><xref ref-type="bibr" rid="c12">12</xref></sup>. Here we adapt a cryptographic method<sup><xref ref-type="bibr" rid="c13">13</xref></sup> to encode information of study protocol within random aspects of the data acquisition process. This way, the structure of variability in the data time-locks the commitment stage with respect to data acquisition. Being independent of any third party, this method fully preserves scientific autonomy and confidentiality. We provide code for easy implementation and a detailed example from the field of functional Magnetic Resonance Imaging (fMRI).</p>
</abstract>
<counts>
<page-count count="11"/>
</counts>
</article-meta>
</front>
<body>
<p>Pre-registration of study plans prior to data collection sharpens the distinction between hypothesis-driven and exploratory phases of the scientific process<sup><xref ref-type="bibr" rid="c11">11</xref>,<xref ref-type="bibr" rid="c14">14</xref></sup>. The importance of this distinction has been recently highlighted following numerous replication failures in the life and social sciences <sup><xref ref-type="bibr" rid="c5">5</xref>&#x2013;<xref ref-type="bibr" rid="c10">10</xref></sup>. Nonetheless, many researchers avoid pre-registration out of concern for their scientific autonomy and confidentiality<sup><xref ref-type="bibr" rid="c12">12</xref></sup>: involving an external party at an early stage of work might introduce delays to study commencement, make researchers more dependent on the publishing agency, or expose them to the risk of being scooped.</p>
<p>Here we introduce a pre-registration scheme that is inspired by cryptographic protocols<sup><xref ref-type="bibr" rid="c13">13</xref></sup> and is performed in-lab, without the involvement of any third party. This scheme guarantees that the study protocol has been specified before data acquisition, making the registration time-locked &#x2014; an essential feature for its validity. In order to fully maintain scientific confidentiality and autonomy, we break the pre-registration process to a commitment stage, performed by the researcher prior to data acquisition, and a verification stage that can be performed by anyone at any later stage. This division alleviates the need for an external inspector to time-lock the registration, and relegates the vouching process to the structure of variability of the data.</p>
<p>The scheme exploits random features in the experimental design to time-lock study plans. It is therefore applicable for experiments with aspects that can be determined in a pseudorandom fashion (such as the timing, order, or type of experimental events). It is assumed that different randomizations would yield different patterns in the data, and that post-hoc manipulation of the data with the purpose of introducing an alternative randomization is detectable. These conditions are met in many experimental designs used across scientific fields including neuroscience and psychology, and for different data types, such as images, behavioral measures, cell recordings and functional neuroimaging data.</p>
<sec id="s1">
<title>commitment stage</title>
<list list-type="order">
<list-item><p>Before data acquisition, a protocol file is saved to a <italic>protocol folder</italic> together with any available details to which the authors wish to commit (such as number of measurements, predictions and analysis parameters that will be used). A script that uses a pseudo-random number generator (PRNG) to determine the experimental random aspects is also saved to the same folder.</p></list-item>
<list-item><p>A cryptographic hash function is applied to the protocol folder. This results in a sequence of bits that for all intents and purposes is unique to the protocol folder (<italic>protocol sum</italic>).</p></list-item>
<list-item><p>The protocol sum is used as an initialization seed for the PRNG.</p></list-item>
<list-item><p>The PRNG is used to determine various random aspects of the experimental protocol, such as order and timing of events.</p></list-item>
<list-item><p>Upon publication, the protocol folder is uploaded to an online repository, and a link to this repository is included in the final manuscript. Raw experimental data is shared publicly, or made available upon request.</p></list-item>
</list>
<p>In practice, steps 2-3 can be performed by calling our preRNG function (Python, R, and Mat-lab implementations accompany the current manuscript) prior to using the pseudorandom number generator to determine the random aspects of the experiment. The preRNG function receives the protocol folder as argument (e.g., <monospace>preRNG</monospace>(&#x2019;D:/experiment/protocolFolder.zip&#x2019;). In cases where multiple randomization schemes are desired, the function can be called with an additional argument specifying the randomization serial number (see Appendix). In our implementations we used the SHA-256 hash function that outputs 256 bits for any arbitrary length input (NIST, 2002).</p>
</sec>
<sec id="s2">
<title>verification stage</title>
<p>The commitment stage introduced a causal link between the acquired data and the content of protocol folder via a chain of dependencies.</p>
<list list-type="order">
<list-item><p>The dependency of the acquired data on random components of the experimental design (red arrow 1 in <xref rid="fig1" ref-type="fig">figure 1</xref>) is a prerequisite for the use of this scheme.</p></list-item>
<list-item><p>The dependency of random components of the experimental design on the protocol sum (red arrow 2 in <xref rid="fig1" ref-type="fig">figure 1</xref>) was obtained through the initialization of the PRNG with the protocol sum as seed. This dependency is tight, since the behavior of the PRNG is deterministically set given a particular seed, and different seeds result in different behaviors<sup><xref ref-type="bibr" rid="c15">15</xref></sup>.</p></list-item>
<list-item><p>The dependency of the protocol sum on the protocol folder (red arrow 3 in <xref rid="fig1" ref-type="fig">figure 1</xref>) was obtained through the use of a cryptographic hash function. Such functions map arbitrary length inputs to sequences of bits of a fixed length such that finding a collision (i.e., two inputs that are mapped to the same sequence of bits) is infeasible.</p></list-item>
</list>
<p>Altogether, this chain of dependencies enforces a causal link and thus time-locks the acquired data with respect to the protocol folder. Due to this causal link, raw experimental data should be in line with the randomness incurred by the PRNG that has been initiated with the protocol-sum as seed. This can be verified by analyzing the shared data according to the analysis plans specified in the protocol folder, by visual inspection, or using any other data-based verification tests chosen by the verifier &#x2014; be it an editor, a reviewer, or an interested reader.</p>
<fig id="fig1" position="float" orientation="portrait" fig-type="figure">
<label>Figure 1:</label>
<caption><p>a. The pre-RNG scheme. Registration time-locking is obtained by making the acquired data (represented as line plots) dependent on the protocol folder via specific random components of the experimental design (represented as blue and red events). b. An alternative protocol folder results in a different randomization and therefore a different structure of data variability. This chain of dependencies time-locks the pre-registration with respect to data acquisition.</p></caption>
<graphic xlink:href="213439_fig1.tif"/>
</fig>
<p>To demonstrate the use of the preRNG scheme we describe a hypothetical scenario involving a researcher (Alice) and an interested reader (Bob), based on an experiment that was conducted in our lab for the purpose of demonstration<sup><xref ref-type="bibr" rid="c16">16</xref></sup>. Alice examined cerebellar involvement in hand movement and committed to her study plans using preRNG. Bob wants to verify that certain findings that are especially relevant to his own research are hypothesis-driven, as reported. Alice&#x2019;s paper and Bob&#x2019;s verification are both included in the appendix to this paper.</p>
<p>Bob downloads the study protocol folder from the link provided in the manuscript and in it he finds a methods section specifying Alice&#x2019;s choice to restrict her analysis to the cerebellum. Bob runs the preRNG function on the protocol folder, resulting in a protocol-sum that is identical to the one obtained by Alice (dependency number 3). Bob then uses the Python script that he found in the protocol folder to generate a pseudorandom sequence of experimental events, based on the resulting protocol-sum. Since Bob and Alice obtained an identical protocol-sum and since PRNGs are deterministic, Bob obtains the same sequence of events that was used by Alice in the actual experiment (dependency number 2). Given the high number of possible event orders in Alice&#x2019;s experiment<sup><xref ref-type="bibr" rid="c16">16</xref></sup>, the likelihood of obtaining a particular sequence of events by chance is very small (<italic>&#x003C;</italic> 10<sup><italic>&#x2212;</italic>20</sup>). Therefore the probability that a different PRNG seed would have resulted in a similar order of events is negligible.</p>
<p>In order to verify that the data reflects this randomization (dependency number 1), Bob writes to Alice and kindly asks for the raw experimental data. He then decides to perform a whole-brain GLM contrast between right and left hand movements, using the information he now acquired about the temporal order of events. Note that Bob is free to choose whatever verification analysis he finds fit and is not limited to the analysis reported by Alice (for additional verification steps he can use see Appendix). The resulting map is in line with Bob&#x2019;s prior knowledge of robust lateralized brain activations in primary cortical areas. Since fMRI data are highly affected by the specific order of events, as reflected in the spatial and temporal dynamics of the signal, the alignment of the acquired data with the pseudorandom order of events is a reliable voucher for the pre-registration validity. Bob is now convinced that the randomization induced by the protocolsum is in line with the data, and therefore that Alice&#x2019;s specification of analysis plans in the protocol folder has been genuinely made prior to data acquisition.</p>
<p>The preRNG scheme allowed Alice to provide empirical support for her claim that certain choices have been made prior to data collection, without sharing her study plans with any external party at an early stage. This would not have been possible in any other pre-registration implementation. Unreviewed pre-registration<sup><xref ref-type="bibr" rid="c17">17</xref></sup> platforms (UPR; aspredicted.org, osf.io) cannot guarantee that the registration of study protocol is indeed time-locked to precede data acquisition, as they only serve as an open vault for researchers to submit their study plans. To date, time locking of protocol registration can only be obtained by introducing an additional peer-review step at an early stage of work (reviewed pre-registration; RPR<sup><xref ref-type="bibr" rid="c18">18</xref></sup>). Knowing that reviewers might request changes in the experimental design reduces the incentive to pre-register studies for which data has already been collected. Some RPR schemes have the advantage of facilitating the publication of null results by committing to publish regardless of outcome &#x2014; a feature that is not supported by our in-lab approach. Nonetheless, RPR compromises scientific confidentiality and autonomy, making this solution less appealing for many.</p>
<p>By providing a time-locked pre-registration scheme that maintains the confidentiality and autonomy of the scientific process, we hope to encourage research labs to pre-register predetermined aspects of their studies and by doing so delineate a clearer border between hypothesis-driven and exploratory findings. This is an important step in mitigating the contribution of undisclosed flexibility in data acquisition and analysis to the replicability crisis.</p>
<fig id="fig2" position="float" orientation="portrait" fig-type="figure">
<label>Figure 2:</label>
<caption><p>The three pre-registration schemes. The transition from dark blue to light gray indicates the first mandatory exposure of the research protocol to a third party. Lock icons represent the commitment to a specific research protocol. The red arrow in the UPR scheme represents the loophole allowing one to &#x201C;pre-register&#x201D; research plans even after data collection and exploration. Our pre-RNG scheme is time-locked but does not require early exposure.</p></caption>
<graphic xlink:href="213439_fig2.tif"/>
</fig>
</sec>
</body>
<back>
<ref-list>
<ref id="c1"><label>1.</label><mixed-citation publication-type="journal"><string-name><surname>Simmons</surname>, <given-names>J. P.</given-names></string-name>, <string-name><surname>Nelson</surname>, <given-names>L. D.</given-names></string-name> &#x0026; <string-name><surname>Simonsohn</surname>, <given-names>U.</given-names></string-name> <article-title>False-positive psychology: Undisclosed flexibility in data collection and analysis allows presenting anything as significant</article-title>. <source>Psychological science</source> <volume>22</volume>, <fpage>1359</fpage>&#x2013;<lpage>1366</lpage> (<year>2011</year>).</mixed-citation></ref>
<ref id="c2"><label>2.</label><mixed-citation publication-type="book"><string-name><surname>Gelman</surname>, <given-names>A.</given-names></string-name> &#x0026; <string-name><surname>Loken</surname>, <given-names>E.</given-names></string-name> <source>The garden of forking paths: Why multiple comparisons can be a problem, even when there is no fishing expedition or p-hacking and the research hypothesis was posited ahead of time.</source> <publisher-name>Department of Statistics, Columbia University</publisher-name> (<year>2013</year>).</mixed-citation></ref>
<ref id="c3"><label>3.</label><mixed-citation publication-type="journal"><string-name><surname>Carp</surname>, <given-names>J.</given-names></string-name> <article-title>On the plurality of (methodological) worlds: estimating the analytic flexibility of fmri experiments</article-title>. <source>Frontiers in neuroscience</source><volume>6</volume>, <fpage>149</fpage> (<year>2012</year>).</mixed-citation></ref>
<ref id="c4"><label>4.</label><mixed-citation publication-type="other"><string-name><surname>Poldrack</surname>, <given-names>R. A.</given-names></string-name> <etal>et al.</etal> <article-title>Scanning the horizon: towards transparent and reproducible neuroimaging research</article-title>. <source>Nature Reviews Neuroscience</source>(<year>2017</year>).</mixed-citation></ref>
<ref id="c5"><label>5.</label><mixed-citation publication-type="journal"><string-name><surname>Flint</surname>, <given-names>J.</given-names></string-name> &#x0026; <string-name><surname>Munaf&#x00F2;</surname>, <given-names>M. R.</given-names></string-name> <article-title>Candidate and non-candidate genes in behavior genetics</article-title>. <source>Current Opinion in Neurobiology</source><volume>23</volume>, <fpage>57</fpage>&#x2013;<lpage>61</lpage> (<year>2013</year>).</mixed-citation></ref>
<ref id="c6"><label>6.</label><mixed-citation publication-type="journal"><string-name><surname>Baker</surname>, <given-names>M.</given-names></string-name> <article-title>Over half of psychology studies fail reproducibility test</article-title>. <source>Nature News</source> <volume>27</volume> (<year>2015</year>).</mixed-citation></ref>
<ref id="c7"><label>7.</label><mixed-citation publication-type="journal"><string-name><surname>Collaboration</surname>, <given-names>O. S.</given-names></string-name> <etal>et al.</etal> <article-title>Estimating the reproducibility of psychological science</article-title>. <source>Science</source> <volume>349</volume>, <fpage>aac4716</fpage> (<year>2015</year>).</mixed-citation></ref>
<ref id="c8"><label>8.</label><mixed-citation publication-type="journal"><string-name><surname>Boekel</surname>, <given-names>W.</given-names></string-name> <etal>et al.</etal> <article-title>A purely confirmatory replication study of structural brain-behavior correlations</article-title>. <source>Cortex</source><volume>66</volume>, <fpage>115</fpage>&#x2013;<lpage>133</lpage> (<year>2015</year>).</mixed-citation></ref>
<ref id="c9"><label>9.</label><mixed-citation publication-type="journal"><string-name><surname>Baker</surname>, <given-names>M.</given-names></string-name> &#x0026; <string-name><surname>Dolgin</surname>, <given-names>E.</given-names></string-name> <article-title>Reproducibility project yields muddy results</article-title>. <source>Nature</source><volume>541</volume>, <fpage>269</fpage>&#x2013;<lpage>270</lpage> (<year>2017</year>).</mixed-citation></ref>
<ref id="c10"><label>10.</label><mixed-citation publication-type="journal"><string-name><surname>H&#x00E9;roux</surname>, <given-names>M. E.</given-names></string-name>, <string-name><surname>Loo</surname>, <given-names>C. K.</given-names></string-name>, <string-name><surname>Taylor</surname>, <given-names>J. L.</given-names></string-name> &#x0026; <string-name><surname>Gandevia</surname>, <given-names>S. C.</given-names></string-name> <article-title>Questionable science and reproducibility in electrical brain stimulation research</article-title>. <source>PloS one</source><volume>12</volume>, <fpage>e0175635</fpage> (<year>2017</year>).</mixed-citation></ref>
<ref id="c11"><label>11.</label><mixed-citation publication-type="journal"><string-name><surname>Nosek</surname>, <given-names>B. A.</given-names></string-name> <etal>et al.</etal> <article-title>Promoting an open research culture</article-title>. <source>Science</source><volume>348</volume>, <fpage>1422</fpage>&#x2013;<lpage>1425</lpage> (<year>2015</year>).</mixed-citation></ref>
<ref id="c12"><label>12.</label><mixed-citation publication-type="other"><string-name><surname>Tucker</surname>, <given-names>J.</given-names></string-name> <chapter-title>Experiments, preregistration, and journals [blog post]</chapter-title>. <source>OUPblog</source>(<year>2014</year>).</mixed-citation></ref>
<ref id="c13"><label>13.</label><mixed-citation publication-type="book"><string-name><surname>Fiat</surname>, <given-names>A.</given-names></string-name> &#x0026; <string-name><surname>Shamir</surname>, <given-names>A.</given-names></string-name> <chapter-title>How to prove yourself: Practical solutions to identification and signature problems</chapter-title>. In <source>Conference on the Theory and Application of Cryptographic Techniques</source>, <fpage>186</fpage>&#x2013;<lpage>194</lpage> (<publisher-name>Springer</publisher-name>, <year>1986</year>).</mixed-citation></ref>
<ref id="c14"><label>14.</label><mixed-citation publication-type="journal"><string-name><surname>Munaf&#x00F2;</surname>, <given-names>M. R.</given-names></string-name> <etal>et al.</etal> <article-title>A manifesto for reproducible science</article-title>. <source>Nature Human Behaviour</source><volume>1</volume>, <fpage>0021</fpage> (<year>2017</year>).</mixed-citation></ref>
<ref id="c15"><label>15.</label><mixed-citation publication-type="journal"><string-name><surname>Matsumoto</surname>, <given-names>M.</given-names></string-name>, <string-name><surname>Nishimura</surname>, <given-names>T.</given-names></string-name>, <string-name><surname>Hagita</surname>, <given-names>M.</given-names></string-name> &#x0026; <string-name><surname>Saito</surname>, <given-names>M.</given-names></string-name> <article-title>Cryptographic mersenne twister and fubuki stream/block cipher</article-title>. <source>IACR Cryptology ePrint Archive</source><volume>2005</volume>, <fpage>165</fpage> (<year>2005</year>).</mixed-citation></ref>
<ref id="c16"><label>16.</label><mixed-citation publication-type="other"><string-name><surname>Alice</surname></string-name>. <source>Cerebellum involvement in hand movements: a functional mri study</source> (<year>2017</year>).</mixed-citation></ref>
<ref id="c17"><label>17.</label><mixed-citation publication-type="journal"><string-name><surname>van&#x2019;t Veer</surname>, <given-names>A. E.</given-names></string-name> &#x0026; <string-name><surname>Giner-Sorolla</surname>, <given-names>R.</given-names></string-name> <article-title>Pre-registration in social psychologya discussion and suggested template</article-title>. <source>Journal of Experimental Social Psychology</source><volume>67</volume>, <fpage>2</fpage>&#x2013;<lpage>12</lpage> (<year>2016</year>).</mixed-citation></ref>
<ref id="c18"><label>18.</label><mixed-citation publication-type="journal"><string-name><surname>Chambers</surname>, <given-names>C. D.</given-names></string-name> <article-title>Registered reports: A new publishing initiative at cortex [editorial]</article-title>. <source>Cortex</source> <volume>49</volume>, <fpage>609</fpage>&#x2013;<lpage>610</lpage> (<year>2013</year>).</mixed-citation></ref>
</ref-list>
<ack>
<title>Acknowledgements</title>
<p>We thank Yoav Benjamini, Tal Galili, Tal Golan, Roni Maimon, Rafi Malach, Bats-Sheva Mazor, Jonathan Rosenblatt and Tom Schoenberg for their helpful insights and comments.</p>
</ack>
<sec>
<title>Competing Interests</title>
<p>The authors declare that they have no competing financial interests.</p>
</sec>
</back>
</article>